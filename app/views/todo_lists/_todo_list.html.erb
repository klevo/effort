<article id="<%= dom_id todo_list %>" class="todo_list">
  <header>
    <span class="nubbin">
      <%= link_to [todo_list.project, todo_list], method: :delete,
          format: :js, remote: true, data: { confirm: 'Are you sure?' } do %>
        <%= fa_icon 'trash-o' %>
      <% end %>
    </span>
    <h3 class="name"
        data-behavior="edit_on_dblclick"
        data-edit-url="<%= edit_project_todo_list_path(todo_list.project, todo_list) %>">
      <%= todo_list.name %>
    </h3>
  </header>

  <ul class="items"
      data-behavior="sortable"
      data-connect-sortable-with=".todo_list .items"
      data-position-url="<%= position_project_todo_list_todo_items_path(todo_list.project, todo_list, format: :js) %>">
    <% todo_list.todo_items.pending.positioned.each do |todo_item| %>
      <%= render todo_item %>
    <% end %>
  </ul>

  <div data-behavior="add_item_trigger_container" class="add_item_trigger_container">
    <%= link_to 'Add a to-do', [:new, todo_list.project, todo_list, :todo_item], remote: true, format: :js %>
  </div>

  <div data-behavior="add_todo_item_form_container">
  </div>

  <ul class="completed_items">
    <% todo_list.todo_items.completed.last_updated.each do |todo_item| %>
      <%= render todo_item %>
    <% end %>
  </ul>
</article>
